"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPagingMessageHandler = exports.getMessageHandler = exports.messageHandler = void 0;
const dto_group_1 = require("./../../common/constant/dto.group");
const message_dto_1 = require("./../../common/validation/dto/message.dto");
const validate_1 = require("./../../common/validation/validate");
const message_service_1 = require("../service/message.service");
const paging_dto_1 = require("../../common/validation/dto/paging.dto");
async function messageHandler(req, reply) {
    const data = await (0, validate_1.validateIt)(req.body, message_dto_1.MessageDto, dto_group_1.DtoGroup.CREATE);
    const result = await (0, message_service_1.MessageService)(data);
    reply.success(result._id);
}
exports.messageHandler = messageHandler;
;
async function getMessageHandler(req, reply) {
    const result = await (0, message_service_1.GetMessageService)();
    reply.success(result);
}
exports.getMessageHandler = getMessageHandler;
;
async function getPagingMessageHandler(req, reply) {
    const data = await (0, validate_1.validateIt)(req.query, paging_dto_1.PagingDto, dto_group_1.DtoGroup.PAGING);
    const result = await (0, message_service_1.getMessagesByPagingService)(data);
    reply.success(result);
}
exports.getPagingMessageHandler = getPagingMessageHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS5oYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2FkbWluL2hhbmRsZXIvbWVzc2FnZS5oYW5kbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlFQUE2RDtBQUM3RCwyRUFBdUU7QUFDdkUsaUVBQWdFO0FBQ2hFLGdFQUEyRztBQUMzRyx1RUFBbUU7QUFHNUQsS0FBSyxVQUFVLGNBQWMsQ0FBQyxHQUFHLEVBQUUsS0FBSztJQUMzQyxNQUFNLElBQUksR0FBRyxNQUFNLElBQUEscUJBQVUsRUFBQyxHQUFHLENBQUMsSUFBSSxFQUFFLHdCQUFVLEVBQUUsb0JBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyRSxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsZ0NBQWMsRUFBQyxJQUFJLENBQUMsQ0FBQztJQUMxQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM5QixDQUFDO0FBSkQsd0NBSUM7QUFBQSxDQUFDO0FBRUssS0FBSyxVQUFVLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxLQUFLO0lBQzlDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSxtQ0FBaUIsR0FBRSxDQUFDO0lBQ3pDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUIsQ0FBQztBQUhELDhDQUdDO0FBQUEsQ0FBQztBQUVLLEtBQUssVUFBVSx1QkFBdUIsQ0FBQyxHQUFHLEVBQUUsS0FBSztJQUNwRCxNQUFNLElBQUksR0FBRyxNQUFNLElBQUEscUJBQVUsRUFBQyxHQUFHLENBQUMsS0FBSyxFQUFFLHNCQUFTLEVBQUUsb0JBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyRSxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsNENBQTBCLEVBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMxQixDQUFDO0FBSkQsMERBSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEdG9Hcm91cCB9IGZyb20gJy4vLi4vLi4vY29tbW9uL2NvbnN0YW50L2R0by5ncm91cCc7XG5pbXBvcnQgeyBNZXNzYWdlRHRvIH0gZnJvbSAnLi8uLi8uLi9jb21tb24vdmFsaWRhdGlvbi9kdG8vbWVzc2FnZS5kdG8nO1xuaW1wb3J0IHsgdmFsaWRhdGVJdCB9IGZyb20gJy4vLi4vLi4vY29tbW9uL3ZhbGlkYXRpb24vdmFsaWRhdGUnO1xuaW1wb3J0IHsgZ2V0TWVzc2FnZXNCeVBhZ2luZ1NlcnZpY2UsIEdldE1lc3NhZ2VTZXJ2aWNlLCBNZXNzYWdlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlL21lc3NhZ2Uuc2VydmljZVwiO1xuaW1wb3J0IHsgUGFnaW5nRHRvIH0gZnJvbSAnLi4vLi4vY29tbW9uL3ZhbGlkYXRpb24vZHRvL3BhZ2luZy5kdG8nO1xuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtZXNzYWdlSGFuZGxlcihyZXEsIHJlcGx5KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHZhbGlkYXRlSXQocmVxLmJvZHksIE1lc3NhZ2VEdG8sIER0b0dyb3VwLkNSRUFURSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTWVzc2FnZVNlcnZpY2UoZGF0YSk7XG4gICAgcmVwbHkuc3VjY2VzcyhyZXN1bHQuX2lkKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNZXNzYWdlSGFuZGxlcihyZXEsIHJlcGx5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgR2V0TWVzc2FnZVNlcnZpY2UoKTtcbiAgICByZXBseS5zdWNjZXNzKHJlc3VsdCk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFnaW5nTWVzc2FnZUhhbmRsZXIocmVxLCByZXBseSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB2YWxpZGF0ZUl0KHJlcS5xdWVyeSwgUGFnaW5nRHRvLCBEdG9Hcm91cC5QQUdJTkcpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldE1lc3NhZ2VzQnlQYWdpbmdTZXJ2aWNlKGRhdGEpO1xuICAgIHJlcGx5LnN1Y2Nlc3MocmVzdWx0KTtcbn1cbiJdfQ==